{% extends "project_base.html" %}
{% load i18n staticfiles project_filters%}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'slick.js/slick/slick.css' %}">
{% endblock %}

{% block extra_js %}
    <script src="{% static 'slick.js/slick/slick.min.js' %}"></script>
    <script src="{% static 'jquery-cookie/jquery.cookie.js' %}"></script>
    <script src="{% static 'jquery-file-upload/js/vendor/jquery.ui.widget.js' %}"></script>
    <script src="{% static 'jquery-file-upload/js/jquery.iframe-transport.js' %}"></script>
    <script src="{% static 'jquery-file-upload/js/jquery.fileupload.js' %}"></script>

    <script>
        function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

        $(document).ready(function(){
            var csrf_token = $.cookie('csrftoken');

           $(".your-class").slick({
                dots: true,
               autoplay:true,
{#               autoplaySpeed:300,#}
               speed:500
{#               arrows:true,#}
{#                 prevArrow:$(".slick-prev"),#}
{#               nextArrow:$(".slick-next")#}
{#               lazyLoad: 'ondemand',#}
{#              slidesToShow: 3,#}
{#              slidesToScroll: 1#}
        });

                    $('#fileupload').fileupload({
            crossDomain: false,
            beforeSend: function(xhr, settings) {
                if (!csrfSafeMethod(settings.type)) {
                    xhr.setRequestHeader("X-CSRFToken", csrf_token);
                }
            },
            dataType: 'json',
            done: function (e, data) {
                console.log(data);
{#                $.each(data.result.files, function (index, file) {#}
{#                    $('<p/>').text(file.name).appendTo(document.body);#}
{#                });#}
            },
            progressall: function (e, data) {
                var progress = parseInt(data.loaded / data.total * 100, 10);
                console.log(progress);
                $('#progress .progress-bar').css(
                    'width',
                    progress + '%'
                );
            }
        });


        });
    </script>
{% endblock %}

{% block left_panel %}
    {% include "review_left_panel.html" %}
{% endblock %}

{% block project_main %}
{% if review.id != 99999 %}

<div>
    <div>
        <input id="fileupload" type="file" name="files" data-url="{% url 'enterprise.review.photo' review.id%}" multiple>
    </div>
    <!-- The global progress bar -->
    <div id="progress" class="progress">
        <div class="progress-bar progress-bar-success"></div>
    </div>
</div>

<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">{% trans "Element Evaluation Form" %}</h3>
  </div>
  <div class="panel-body">
    <a href="{% url 'enterprise.project.element.add' project_id %}" >{% trans "Element Evaluation Form" %}</a>
    <a target="_main" href="{% url 'enterprise.project.print.element' project_id %}" >{% trans "Print" %}</a>
  </div>
</div>

<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">{% trans "Batch Evaluation Form" %}</h3>
  </div>
  <div class="panel-body">
    <a href="{% url 'enterprise.project.batch.add' project_id %}" >{% trans "Batch Evaluation Form" %}</a>
    <a target="_main" href="{% url 'enterprise.project.print.batch' project_id %}" >{% trans "Print" %}</a>
  </div>
</div>

<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">{% trans "Stage Evaluation Form" %}</h3>
  </div>
  <div class="panel-body">
    <a href="{% url 'enterprise.project.stage.add' project_id %}" >{% trans "Stage Evaluation Form" %}</a>
    <a target="_main" href="{% url 'enterprise.project.print.stage' project_id %}" > {% trans "Print" %}</a>
  </div>
</div>

<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">{% trans "Unit Evaluation Form" %}</h3>
  </div>
  <div class="panel-body">
    <a href="{% url 'enterprise.project.unit.add' project_id %}" >{% trans "Unit Evaluation Form" %}</a>
    <a target="_main" href="{% url 'enterprise.project.print.unit' project_id %}" >{% trans "Print" %}</a>
  </div>
</div>
{% endif %}
</div>
</div>
{% endblock %}